/**
* please-wait
* Display a nice loading screen while your app loads

* @author Pathgather <tech@pathgather.com>
* @copyright Pathgather 2017
* @license MIT <http://opensource.org/licenses/mit-license.php>
* @link https://github.com/Pathgather/please-wait
* @module please-wait
* @version 0.1.0
*/
!function(a,b){"object"==typeof exports?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a)}(this,function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;j=document.createElement("fakeelement"),h=!1,q=!1,g="animationend",p=null,i="Webkit Moz O ms".split(" "),o={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"};for(k in o)if(r=o[k],null!=j.style[k]){p=r,q=!0;break}if(null!=j.style.animationName&&(h=!0),!h)for(s=0,t=i.length;s<t;s++)if(l=i[s],null!=j.style[l+"AnimationName"]){switch(l){case"Webkit":g="webkitAnimationEnd";break;case"Moz":g="animationend";break;case"O":g="oanimationend";break;case"ms":g="MSAnimationEnd"}h=!0;break}return e=function(a,b){return b.classList?b.classList.add(a):b.className+=" "+a},n=function(a,b){return b.classList?b.classList.remove(a):b.className=b.className.replace(a,"").trim()},f=function(a,b){var c,d,e;return null==b&&(b=!1),d="please-wait-styles",e=document.getElementById(d),e||(c=document.getElementsByTagName("head")[0],e=document.createElement("style"),e.id=d,e.setAttribute("type","text/css"),c.appendChild(e)),b?e.styleSheet?e.styleSheet.cssText+=a:e.appendChild(document.createTextNode(a)):e.styleSheet?e.styleSheet.cssText=a:e.innerText=a},d={"chasing-dots":'<div class="sk-child sk-dot1"></div>\n<div class="sk-child sk-dot2"></div>',circle:'<div class="sk-circle1 sk-child"></div>\n<div class="sk-circle2 sk-child"></div>\n<div class="sk-circle3 sk-child"></div>\n<div class="sk-circle4 sk-child"></div>\n<div class="sk-circle5 sk-child"></div>\n<div class="sk-circle6 sk-child"></div>\n<div class="sk-circle7 sk-child"></div>\n<div class="sk-circle8 sk-child"></div>\n<div class="sk-circle9 sk-child"></div>\n<div class="sk-circle10 sk-child"></div>\n<div class="sk-circle11 sk-child"></div>\n<div class="sk-circle12 sk-child"></div>',"cube-grid":'<div class="sk-cube sk-cube1"></div>\n<div class="sk-cube sk-cube2"></div>\n<div class="sk-cube sk-cube3"></div>\n<div class="sk-cube sk-cube4"></div>\n<div class="sk-cube sk-cube5"></div>\n<div class="sk-cube sk-cube6"></div>\n<div class="sk-cube sk-cube7"></div>\n<div class="sk-cube sk-cube8"></div>\n<div class="sk-cube sk-cube9"></div>',"double-bounce":'<div class="sk-child sk-double-bounce1"></div>\n<div class="sk-child sk-double-bounce2"></div>',"fading-circle":'<div class="sk-circle1 sk-circle"></div>\n<div class="sk-circle2 sk-circle"></div>\n<div class="sk-circle3 sk-circle"></div>\n<div class="sk-circle4 sk-circle"></div>\n<div class="sk-circle5 sk-circle"></div>\n<div class="sk-circle6 sk-circle"></div>\n<div class="sk-circle7 sk-circle"></div>\n<div class="sk-circle8 sk-circle"></div>\n<div class="sk-circle9 sk-circle"></div>\n<div class="sk-circle10 sk-circle"></div>\n<div class="sk-circle11 sk-circle"></div>\n<div class="sk-circle12 sk-circle"></div>',"folding-cube":'<div class="sk-cube1 sk-cube"></div>\n<div class="sk-cube2 sk-cube"></div>\n<div class="sk-cube4 sk-cube"></div>\n<div class="sk-cube3 sk-cube"></div>',pulse:"","rotating-plane":"","three-bounce":'<div class="sk-child sk-bounce1"></div>\n<div class="sk-child sk-bounce2"></div>\n<div class="sk-child sk-bounce3"></div>',"wandering-cubes":'<div class="sk-cube sk-cube1"></div>\n<div class="sk-cube sk-cube2"></div>',wave:'<div class="sk-rect sk-rect1"></div>\n<div class="sk-rect sk-rect2"></div>\n<div class="sk-rect sk-rect3"></div>\n<div class="sk-rect sk-rect4"></div>\n<div class="sk-rect sk-rect5"></div>'},b={ELLIPSIS:"ellipsis",LOADED:"pg-loaded",LOADING:"pg-loading",LOADING_HTML:"pg-loading-html",LOADING_LOGO:"pg-loading-logo",LOADING_SCREEN:"pg-loading-screen",LOADING_MESSAGE:"pg-loading-message",REMOVING:"pg-removing",SPINNER_BEFORE:"spinner-before",SPINNER_AFTER:"spinner-after"},c=function(){function a(a){var c,i,j,k,l,m,o,r,s,t,u,v,w,x,y;c=this.constructor._defaultOptions,this.options={},this.loaded=!1,this.finishing=!1;for(j in c)w=c[j],this.options[j]=null!=a[j]?a[j]:w;if(v="",this._loadingElem=document.createElement("div"),this._loadingHtmlToDisplay=[],this._loadingElem.className=b.LOADING_SCREEN,null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this.options.logo&&(l=document.createElement("img"),l.className=b.LOADING_LOGO,m=this._loadingElem.getElementsByClassName("pg-loading-logo-header")[0],m.insertBefore(l,m.firstChild),this.options.logoMaxSize&&("string"==typeof this.options.logoMaxSize||this.options.logoMaxSize instanceof String?v+=".pg-loading-screen .pg-loading-logo-header img { max-height: "+this.options.logoMaxSize+"; max-width: "+this.options.logoMaxSize+"; }":v+=".pg-loading-screen .pg-loading-logo-header img { max-height: "+this.options.logoMaxSize[1]+"; max-width: "+this.options.logoMaxSize[0]+"; }")),this._loadingHtmlElem=this._loadingElem.getElementsByClassName(b.LOADING_HTML)[0],this._loadingHtmlElem&&(this.options.loadingHtml&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this.options.loadingMessage&&(this._loadingHtmlElem.innerHTML='<div class="'+b.LOADING_MESSAGE+'">'+this.options.loadingMessage+"</div>")),this._loadingMsg=this._loadingHtmlElem.getElementsByClassName(b.LOADING_MESSAGE)[0],null!=this._loadingMsg&&this.options.appendAnimatedEllipsis&&e(b.ELLIPSIS,this._loadingMsg),(this.options.spinnerBefore||this.options.spinnerAfter)&&null!=this._loadingMsg){if(this._loadingMsgParent=this._loadingMsg.parentNode,t=document.createElement("div"),u=this.options.spinnerBefore||this.options.spinnerAfter,t.innerHTML=d[u],t.className=("pulse"===u?"sk-spinner sk-spinner-":"sk-")+u,this.options.spinnerColor){for(s=t.className.split(" "),i=x=y=s.length-1;y<=0?x<=0:x>=0;i=y<=0?++x:--x)s[i]="."+s[i];switch(r=s.join(""),o="background-color: "+this.options.spinnerColor+" !important;",u){case"pulse":case"rotating-plane":v+=r+" { "+o+" }";break;case"circle":case"fading-circle":case"folding-cube":v+=r+" > div::before { "+o+" }";break;default:v+=r+" > div { "+o+" }"}}this.options.spinnerBefore?(e(b.SPINNER_BEFORE,this._loadingHtmlElem),this._loadingMsgParent.insertBefore(t,this._loadingMsgParent.firstChild)):(e(b.SPINNER_AFTER,this._loadingHtmlElem),this._loadingMsgParent.appendChild(t))}this._readyToShowLoadingHtml=!1,null!=this.options.logo&&(this._logoElem=this._loadingElem.getElementsByClassName(b.LOADING_LOGO)[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo)),n(b.LOADED,this.options.container),e(b.LOADING,this.options.container),this.options.container.appendChild(this._loadingElem),e(b.LOADING,this._loadingElem),this._onLoadedCallback=this.options.onLoadedCallback,""!==v&&f(v),k=function(a){return function(c){if(a.loaded=!0,a._readyToShowLoadingHtml=!0,e(b.LOADED,a._loadingHtmlElem),h&&a._loadingHtmlElem.removeEventListener(g,k),a._loadingHtmlToDisplay.length>0&&a._changeLoadingHtml(),a.finishing)return null!=c&&c.stopPropagation(),a._finish()}}(this),null!=this._loadingHtmlElem&&(h?this._loadingHtmlElem.addEventListener(g,k):k(),this._loadingHtmlListener=function(a){return function(){if(a._readyToShowLoadingHtml=!0,n(b.LOADING,a._loadingHtmlElem),q&&a._loadingHtmlElem.removeEventListener(p,a._loadingHtmlListener),a._loadingHtmlToDisplay.length>0)return a._changeLoadingHtml()}}(this),this._removingHtmlListener=function(a){return function(){return a._loadingHtmlElem.innerHTML=a._loadingHtmlToDisplay.shift(),n(b.REMOVING,a._loadingHtmlElem),e(b.LOADING,a._loadingHtmlElem),q?(a._loadingHtmlElem.removeEventListener(p,a._removingHtmlListener),a._loadingHtmlElem.addEventListener(p,a._loadingHtmlListener)):a._loadingHtmlListener()}}(this))}return a._defaultOptions={animateOptionUpdate:!1,appendAnimatedEllipsis:!0,backgroundColor:null,container:document.body,loadingHtml:null,loadingMessage:null,logo:null,logoMaxSize:null,spinnerBefore:!1,spinnerAfter:null,spinnerColor:null,template:'<div class="pg-loading-inner">\n  <div class="pg-loading-center-outer">\n    <div class="pg-loading-center-middle">\n      <h1 class="pg-loading-logo-header"></h1>\n      <div class="pg-loading-html"></div>\n    </div>\n  </div>\n</div>',onLoadedCallback:null},a.prototype.finish=function(a,b){if(null==a&&(a=!1),window.document.hidden&&(a=!0),this.finishing=!0,null!=b&&this.updateOption("onLoadedCallback",b),this.loaded||a)return this._finish(a)},a.prototype.updateMessage=function(a){if(null!=this._loadingMsg)return this._loadingMsg.innerHTML=a},a.prototype.updateOption=function(a,b,c,d){switch(null==d&&(d=!1),a){case"backgroundColor":return this._loadingElem.style.backgroundColor=b;case"logo":return this._logoElem.src=b;case"loadingHtml":return this.updateLoadingHtml(b,c,d);case"onLoadedCallback":return this._onLoadedCallback=b;default:throw new Error("Unknown option '"+a+"'")}},a.prototype.updateOptions=function(a){var b,c,d;null==a&&(a={}),d=[];for(b in a)c=a[b],d.push(this.updateOption(b,c));return d},a.prototype.updateLoadingHtml=function(a,b,c){if(null==c&&(c=!1),null==this._loadingHtmlElem)throw new Error('The loading template does not have an element of class "pg-loading-html"');if(c?(this._loadingHtmlToDisplay=[a],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(a),this._readyToShowLoadingHtml)return this._changeLoadingHtml(b)},a.prototype._changeLoadingHtml=function(a){return null==a&&(a=this.options.animateOptionUpdate),this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(p,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(p,this._removingHtmlListener),n(b.LOADING,this._loadingHtmlElem),n(b.REMOVING,this._loadingHtmlElem),null==a&&(a=!1),q&&a?(e(b.REMOVING,this._loadingHtmlElem),this._loadingHtmlElem.addEventListener(p,this._removingHtmlListener)):this._removingHtmlListener()},a.prototype._finish=function(a){var c;if(null==a&&(a=!1),null!=this._loadingElem)return e(b.LOADED,this.options.container),"function"==typeof this._onLoadedCallback&&this._onLoadedCallback.apply(this),c=function(a){return function(){return a.options.container.removeChild(a._loadingElem),n(b.LOADING,a.options.container),h&&a._loadingElem.removeEventListener(g,c),a._loadingElem=null}}(this),!a&&h?(e(b.LOADED,this._loadingElem),this._loadingElem.addEventListener(g,c)):c()},a}(),m=function(a){return null==a&&(a={}),new c(a)},a.pleaseWait=m,m});